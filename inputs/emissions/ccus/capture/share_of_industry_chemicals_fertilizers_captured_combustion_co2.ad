# The share of captured and emitted CO2 is updated in the molucle graph
# Also, the free_co2_factor of heat provision technologies in fertilizer industry are updated accordingly
# The free_co2_factor of the H2-fired heater, steam network and p2h are excluded since these do not induce on-site CO2 emissions 
# and are thus not relevant for CCS

- query =
    EACH(
      UPDATE(MEDGE(industry_chemicals_fertilizers_captured_combustion_co2, industry_chemicals_fertilizers_capture_potential_combustion_co2), share, DIVIDE(USER_INPUT(),100.0)),
      UPDATE(MEDGE(industry_chemicals_fertilizers_emitted_co2, industry_chemicals_fertilizers_capture_potential_combustion_co2), share, 1.0 - DIVIDE(USER_INPUT(),100.0)),
      UPDATE(
        V(EXCLUDE(INTERSECTION(G(heat_production), G(fertilizers_industry)), G(p2h))),
        free_co2_factor, 
        PRODUCT(
          DIVIDE(USER_INPUT(),100.0),
          0.85
        )
      )
    )
- priority = 0
- max_value = 100.0
- min_value = 0.0
- start_value_gql = present:V(MEDGE(industry_chemicals_fertilizers_capture_potential_combustion_co2, industry_chemicals_fertilizers_captured_combustion_co2), parent_share) * 100.0
- step_value = 1.0
- unit = %
- update_period = future
- disabled_by = external_coupling_industry_chemical_fertilizers_combustion_ccus_captured_co2
